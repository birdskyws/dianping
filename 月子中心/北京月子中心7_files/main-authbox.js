!function(){function n(n,t){for(var o in t)n[o]=t[o];return n}var t="jquery@~1.9.2",o="request@~1.0.7",i="cookie@~0.1.0",e="placeholder@~0.1.1",a="mbox@~1.0.1",s="easy-login@~0.4.39",r="main-authbox@1.0.9/js/tpl/main.js",c="main-authbox@1.0.9/js/tpl/riskhint.js",u="main-authbox@1.0.9/js/lib/post.js",l="main-authbox@1.0.9/index.js",d={},p=d;define(l,[t,o,i,e,a,s,r,c,u],function(n,t,o,i,e){"use strict";function a(n,t,o){if(!o&&"boolean"==typeof s)return void n(s,{code:s?200:0});var i=location.hostname.indexOf("51ping")>-1?location.hostname:"account.dianping.com",e="https://"+i+(t?"/ajax/json/account/login":"/ajax/json/account/info"),a={url:e,data:t,onSuc:function(t){200==t.code&&(s=!0),n(s,t)},onErr:function(){n(!1,{code:0})}};l(a)}var s,r=n("jquery"),c=(n("request").Ajax,n("cookie"),n("placeholder"),n("mbox")),u={main:n("./js/tpl/main"),riskhint:n("./js/tpl/riskhint")},l=n("./js/lib/post"),d=n("easy-login"),p="",f=function(){function n(){var n=r(u.main),t={mbox:new c({content:n,winCls:"",contCls:""}),node:n};return t.easyLogin=d(n.find(".content")[0],{platform:"pc"}),t}var t;return function(){return t=n()}}(),h=function(n,t,o,i){var e=f(),a="";return p=o,"string"==typeof t&&(a=t),"function"!=typeof t&&(t=function(){return t?function(){location.href=t}:function(){location.reload()}}(t)),!i&&s?void t():(e.node.find(".J-title").html((n?n+"，":"")+"请先登录"),a||(a="http://www.dianping.com/aboutus/loginclose"),e.easyLogin.on("login",function(){e.mbox.close(),t()}),void e.mbox.open())};h.showError=function(){},h.checkLogin=a,o.exports=h},{main:!0,map:n({"./js/tpl/main":r,"./js/tpl/riskhint":c,"./js/lib/post":u},p)}),define(r,[],function(n,t,o,i,e){o.exports='<div class="main-authbox">	<div class="title">		<h3 class="J-title">登录点评网</h3>		<a class="close" title="关闭"></a>	</div>	<div class="content clearfix">	</div></div>'},{map:p}),define(c,[],function(n,t,o,i,e){o.exports='<div class="pop-win pop-riskhint">	<div class="dialog-title">账号风险提示<a class="close" title="关闭"></a></div>	<div class="dialog-cont account-risk">	    <p class="risk-tips">您的账号存在风险，已被网站保护起来，<br>请通过找回密码功能重置密码以恢复正常使用。</p>	    <div class="form-btn-block"><span class="btn-type-b btn-fn-c"><a tabindex="4" class="form-btn" href="http://www.dianping.com/resetpassword">找回密码</a></span></div>	</div></div>'},{map:p}),define(u,[],function(n,t,o,i,e){function a(){return new XMLHttpRequest}var s=window.ActiveXObject?function(){if(window.XMLHttpRequest)try{return a()}catch(n){}try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}:a;o.exports=function(n){if(!n.url)throw new Error("url request!");var t=s(),o=[];for(var i in n.data)n.data.hasOwnProperty(i)&&o.push(i+"="+n.data[i]);var e=o.join("&");t.open("POST",n.url,!0),t.withCredentials=!0,t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e),t.onreadystatechange=function(o){4==t.readyState&&(t.status>=200&&t.status<300||304==t.status?n.onSuc(JSON.parse(t.responseText)):(console.log("request failed!"+t.status),301!=t.status&&302!=t.status&&n.onErr&&n.onErr()))}}},{map:p})}();
//# sourceMappingURL=main-authbox.js.map