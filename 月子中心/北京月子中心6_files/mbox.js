!function(){var s="lang@~1.0.0",e="class@~2.0.5",i="jquery@~1.9.2",t="mbox@1.0.4/lib/index.js",n={},o=n;define(t,[s,e,i],function(s,e,i,t,n){"use strict";function o(){b.css("top",u.scrollTop())}function l(){}function c(s,e){var i=p?"absolute":e?"fixed":"absolute",t=s.get("win");t.css("position",i),s.position(),p&&e&&g.on("scroll",s.position)}var a=s("lang"),d=s("class"),r=s("jquery"),p=/msie 6/i.test(navigator.userAgent),u=r("body"),g=r(window),h="mbox_overlay",f=[],v=!1,b=r("<div />").attr({id:h,"class":h});b.css({top:0,left:0,width:p?g.width():"100%","background-color":"#000","z-index":99,zoom:1,opacity:.2,position:p?"absolute":"fixed"});var x=d({Implements:"attrs events",initialize:function(s){var e,i,t,n,o=this;this.set(s||{});var l=this.get("content"),c=this.get("closable");if(a.bind("position",o),i=r("<div />").addClass(o.get("winCls")).css(o.get("css")),t=r("<div />").addClass(o.get("closeCls")),n=r("<div />").addClass(o.get("contCls")||"con"),a.isString(l))e=r(l);else{if(l.constructor!==r)throw"option.content must be a string or an instance of DP.DOM";e=l}e.appendTo(n),c&&t.appendTo(i).on("click",function(){return o.emit("closeBtnClick"),!1}),n.appendTo(i),n.find(".close,.close-btn").on("click",function(){return o.emit("closeBtnClick"),!1}),n.find(".medi-btn.btn-cancel.close-btn").on("click",function(){o.get("closeLxMsg")&&window.LXAnalytics("moduleClick",o.get("closeLxMsg").bid,o.get("closeLxMsg").valLab)}),o.on("closeBtnClick",function(){o.close()}),o.set("closeBtn",t),o.set("win",i),o.set("cont",n)},position:function(){var s=this,e=s.get("needRepose"),i=s.get("win"),t=parseInt(i.css("height")),n=parseInt(i.css("width")),o=g.width(),l=g.height(),c=s.get("css");return e&&i.css({top:(c.top||(l-t)/2)+(p?r(document).scrollTop():0),left:c.left||(o-n)/2}),this},open:function(){var s=this,e=s.get("win"),i=s.get("coverCss"),t=s.get("needRepose");s.get("openLxMsg")&&window.LXAnalytics("moduleView",s.get("openLxMsg").bid,s.get("openLxMsg").valLab),s.emit("open"),f.length||(v||b.appendTo(u),b.css(a.mix({visibility:"visible","z-index":2150,height:p?g.height():"100%"},i)),p&&(o(),g.on("scroll",o)),g.on("resize",l)),e.css("z-index",b.css("z-index")+1),t&&(s.position(),g.on("resize",s.position)),s.exist?e.css("visibility","visible"):(e.appendTo(u),s.exist=!0),s.emit("show");e.find(".dialog-title");return c(s,t),-1===f.indexOf(this)&&f.push(this),this},close:function(){var s,e=this,i=f.length,t=e.get("win");return i&&(t.remove(),1===i&&b.css("visibility","hidden"),e.exist=!1,p&&g.off("scroll",o),g.off("resize",e.position),e.emit("close"),s=f.indexOf(e),-1!==s&&f.splice(s,1)),f.length||(g.off("resize",l),b.remove()),this},hide:function(){return this.get("win").css("display","none"),b.css("visibility","hidden"),this},show:function(){return this.get("win").css("display",""),b.css("visibility","visible"),this}},{cont:{},win:{},closeBtn:{},content:{value:""},winCls:{value:"pop-box"},contCls:{value:"pop-main"},css:{value:{width:"auto",height:"auto",zIndex:2300}},closable:{value:!0},needRepose:{value:!0},openLxMsg:{},closeLxMsg:{}});i.exports=function(s){return new x(s)},i.exports.closeAll=function(){for(;f.length;)f[0].close()},i.exports.dialog=function(s,e){var i=r("<div/>"),t=r('<div class="hd"><span class="close-btn" style="float:right;cursor:pointer">x</span>'+s+"</div>").addClass("hd");t.appendTo(i);var n=r(e);return n.appendTo(i),i.html()},i.exports.Mbox=x},{main:!0,map:o})}();
//# sourceMappingURL=mbox.js.map