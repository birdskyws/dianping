!function(){var a="app-midas@0.6.12/js/cat.js",e="app-midas@0.6.12/js/cat.min.js",s="app-midas@0.6.12/js/mkt.js",i="app-midas@0.6.12/js/third-party.js",d="app-midas@0.6.12/js/third-party/haier.js",t="app-midas@0.6.12/js/third-party/pizzahut.js",p="app-midas@0.6.12/js/view/display-3-10.html.js",n="app-midas@0.6.12/js/view/display-3-12.html.js",o="app-midas@0.6.12/js/view/display-3-14.html.js",r="app-midas@0.6.12/js/view/display-3-15.html.js",c="app-midas@0.6.12/js/view/display-3-19.html.js",m="app-midas@0.6.12/js/view/display-4-10.html.js",l="app-midas@0.6.12/js/view/display-4-12.html.js",f="app-midas@0.6.12/js/view/display-4-14.html.js",h="app-midas@0.6.12/js/view/display-4-15.html.js",j="app-midas@0.6.12/js/view/display-4-19.html.js",u="app-midas@0.6.12/js/view/wrap-3.html.js",y="app-midas@0.6.12/js/view/wrap-4.html.js",v="hippo@~1.2.2",w="fx@^2.0.0",I="tpl@~0.2.1",b="jquery@~1.9.2",k="json@~1.0.1",x="midas-log@~0.0.0",q="request@~0.2.4",g="app-midas@0.6.12/index.js",T=[a,e,s,i,d,t,p,n,o,r,c,m,l,f,h,j,u,y],_={},C=_;define(g,[v,w,I,b,k,x,q],function(a,e,s,i,d){"use strict";a("hippo"),a("fx");var t=a("tpl"),p=a("jquery"),n=a("json"),o=a("midas-log"),r=a("request"),c=a("fx"),m=r.Ajax,l=".J_midas-",f=[3,4],h=[10,12,14,15,19],j=0,u=function(e,s){var i=[];e.forEach(function(e){e.adLegalTag=e.adLegalTag||"广告";var d=parseInt(e.slotId,10)||j;if(-1!==f.indexOf(d)){var n,r,m="./js/view/wrap-"+d+".html",u=[];a.async(m,function(d){n=t.compile(d),e.shopTypeName=s,r=p(n(e,a)),e.launches.forEach(function(d,n){var o="./js/view/display-"+e.slotId+"-"+d.displayId+".html",r=parseInt(d.displayId,10)||j;-1!==h.indexOf(r)&&a.async(o,function(a){var o=t.compile(a);d.shopTypeName=s,d.slotId=e.slotId,d.feedback=d.feedback||"";var r="adidx="+(n+1),m="";switch(!0){case""===d.feedback:d.feedback=r;break;case d.feedback.indexOf("?")>-1:d.feedback.replace(/\b([^&=]*)=([^&=]*)/,function(a,e,s,i){m=s+encodeURIComponent("&"+r)}),d.feedback+=encodeURIComponent("&"+r);break;case d.feedback===decodeURIComponent(d.feedback):d.feedback+="&"+r;break;default:d.feedback=decodeURIComponent(d.feedback)}m=m?m:encodeURIComponent(d.feedback),d.shopHref="/shop/"+d.shopId+"?_fb_="+m,u.push({index:n,html:o(d,p,c)}),i.push(d.launchId+"_"+d.productId)})});var m=setInterval(function(){if(u.length>0){var a;u.sort(function(a,e){return a.index-e.index}),a=u.map(function(a){return a.html}),r.find(".J_con").html(a.join("")),p(l+e.slotId).html(r),3===+e.slotId&&p(".js-discount-info").each(function(a,e){var s=p(e),i=s.parent(),d=i.find(".ave"),t=d?d.outerWidth():0;s.css("max-width",i.innerWidth()-t-10)}),o.init(),i.length&&document.hippo.mv("ad_b",i.join(",")),clearInterval(m)}},50)})}})},y=function(a){var e=window.location.href.split("#")[1];if(e){var s=e.split("="),i=s[1];"cpm"==s[0]&&(a.query=p.extend(a.query,{launchId:i}))}for(var d in a.query)"object"==typeof a.query[d]&&(a.query[d]=n.stringify(a.query[d]));new m({data:a.query,url:a.server,method:"POST"}).on("success",function(e){200==e.code&&e.msg.slots&&u(e.msg.slots,a.query.shopTypeName),window.Adcat&&window.Adcat.done(a.query.pageId)}).send(),o.init()};e.init=function(a){y(a)}},{entries:T,main:!0,map:C})}();
//# sourceMappingURL=app-midas.js.map